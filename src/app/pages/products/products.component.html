

<top-rated-products></top-rated-products>



<h3 class="text-center bg-body-secondary p-3 mt-5 mb-3">{{productsHeader}}</h3>

<div class="container products-container">
  <div class="row">

    <div class="col-lg-3 col-md-4 col-sm-12 ">
      <div class="filteration card pb-1 mt-3">
        <h5 class="bg-primary text-white p-3">Filter Options</h5>
        <ul class="ps-3 pe-3">
          <li class="border-bottom" (click)="sortByNameAtoZ()">
            <i class="pi pi-sort-alpha-down"></i>
            <span>Sort: <span>A</span> ⋙ <span>Z</span></span>
          </li>
          <li class="border-bottom" (click)="sortByNameZtoA()">
            <i class="pi pi-sort-alpha-down-alt"></i>
            <span>Sort: <span>Z</span> ⋙ <span>A</span></span>
          </li>
          <li class="border-bottom" (click)="sortByPriceLowtoHigh()">
            <i class="pi pi-sort-amount-up-alt"></i>
            <span>Sort: <span>Low</span> ⋙ <span>High</span></span>
          </li>
          <li class="border-bottom" (click)="sortByPriceHightoLow()">
            <i class="pi pi-sort-amount-down-alt"></i>
            <span>Sort: <span>High</span> ⋙ <span>Low</span></span>
          </li>
          <li>
            <p class="mb-3">✂ Sort by price range</p>
            <div>
              <p-slider [(ngModel)]="rangeValues" [range]="true" [min]="minPrice" [max]="maxPrice"
                styleClass="bg-info-subtle p-1"></p-slider>
              <p class="fs-6 text-black-50 d-flex justify-content-evenly">
                <span>Min: {{rangeValues[0]}}$</span>
                <i class="pi pi-arrow-right-arrow-left"></i>
                <span>Max: {{rangeValues[1]}}$</span>
              </p>
              <button type="button" (click)="filterProductsByPrice()"
                class="btn btn-outline-primary ms-auto d-block">Search</button>
            </div>
          </li>
        </ul>
      </div>
    </div>
    @defer () {
    <div class="col-lg-9 col-md-8 col-sm-12 container mt-3 mb-3 pt-2 pb-2  paginated-container">
      <div class="search-container">
        <div class="row d-flex justify-content-evenly">
          <div class="icon-container col-2 my-auto">
            <h5 class="text-primary text-center d-none d-lg-block">Shop is Easy</h5>
          </div>
          <div class="input-ul-container col-8 ">
            <div class="card flex justify-content-center">

              <span class="p-fluid">
                <p-autoComplete [(ngModel)]="productFound" [suggestions]="filteredProducts"
                  (completeMethod)="searchForProduct($event)" field="title" [delay]="1000" [minLength]="3"
                  [multiple]="false" placeholder="Search...">
                  <ng-template let-product pTemplate="item">
                    <div class="d-flex justify-content-between align-content-center gap-2">
                      <div class="align-content-center">{{ product.title | truncate:30}}</div>
                      <img src={{product.imageCover}}
                        style="width: 32px; display: inline-block; margin: 5px 0 2px 5px;" />
                    </div>
                  </ng-template>
                </p-autoComplete>
              </span>

            </div>
          </div>
          <div class="col-2 my-auto">
            <h5 class="text-primary text-center d-none d-lg-block">Shop in Peace</h5>
          </div>
        </div>
      </div>
      <div class="row">
        @for (product of paginatedProducts; track product) {
        <div class="col-lg-3 col-md-6 col-sm-6 col-12 mx-auto">
          <single-product [product]="product"></single-product>
        </div>
        }
        <div class="mt-3">
          <paginator [rows]="rows" [totalRecords]="products.length" (pageChange)="paginateProducts($event)" >
          </paginator>
        </div>
      </div>
    </div>
    }
  </div>

</div>

<bra-and-cat-products id="CategoryOrBrand"></bra-and-cat-products>
