<div class="card container w-75 mt-5 px-0">
  <div class="row">
    <div class="col-lg-8 cart">
      <div class="mb-3 d-flex justify-content-between">
        <div>
          <h4 class="fw-bold">Shopping Cart</h4>
        </div>
        <div class="text-muted">{{ numOfCartItems }} items</div>
      </div>


      @if (cartProducts.length==0 && isLoading) {
      <loader />
      }@else if (cartProducts.length==0 && !isLoading) {
      <div class="text-center p-5">
        <h2>your cart is empty!</h2>
        <p>Browse our categories and discover our best deals!</p>
        <button (click)="navigatToProducts()" class="bg-main px-4 py-2 border-0 rounded-2 text-white"> Start Shopping now </button>
      </div>
      }@else {
      @for (cartProdcut of cartProducts; track $index) {
      <div class="row border-top border-bottom text-center">
        <div class="main d-flex align-items-center">
          <div class="col-2">
            <img class="w-100" [src]="cartProdcut.product.imageCover" />
          </div>

          <div class="col-3">
            <p class="text-muted">{{ cartProdcut.product.category.name }}</p>
            <p>{{ cartProdcut.product.title }}</p>
          </div>
          <div class="col-3">
            <button (click)="updateCartItem(cartProdcut.product._id,cartProdcut.count-1) "
              [ngClass]="{ 'disabled-btn': cartProdcut.count <= 1 }"
              class="border-0 rounded-2 bg-main text-white w-25 mx-1">
              -
            </button>
            <button class="border-0 rounded-2 w-25 mx-1">
              {{ cartProdcut.count }}
            </button>
            <button (click)="updateCartItem(cartProdcut.product._id,cartProdcut.count+1)"
              class="border-0 rounded-2 bg-main text-white w-25 mx-1">
              +
            </button>
          </div>

          <div class="col-2">{{ cartProdcut.price }} EGP</div>

          <div class="col-2">
            <p-button (onClick)="confirmPosition('top',cartProdcut.product._id)" label="Delete" severity="danger"
              [outlined]="true" />
          </div>
        </div>
      </div>
      }
      }



      <p-toast position="top-right"></p-toast>

      <p-confirmDialog key="positionDialog" [position]="position" rejectButtonStyleClass="p-button-outlined" />
      <p-confirmDialog />
    </div>

    <div class="col-lg-4 summary ">
      <div class="mb-3 d-flex">
        <div>
          <h4 class="fw-bold">Summary</h4>

        </div>
      </div>

      <div class="row" style="border-top: 1px solid rgba(0, 0, 0, 0.1);  padding: 2vh 0">
        <div class="col">TOTAL PRICE</div>
        <div class="col text-right">{{ totalPrice }}</div>
      </div>
      <button class="btn">CHECKOUT</button>
    </div>
  </div>
</div>
